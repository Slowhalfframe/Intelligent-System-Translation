{% extends 'base.html' %}
{% block title_name %}
登录——欢迎回来~
{% endblock %}


{% block main %}
{% load static %}
<link rel="stylesheet" href="{% static 'users/css/app/register.css' %}">
<script src="{% static 'js/lib/jquery.js' %}"></script>
<div class="register">
    <div class="box">
        <h2 style="margin-bottom: 20px;">用户登录</h2>
        <h5 id="msg">{{msg}}</h5>
        <form class="form-horizontal" action="/users/login/" method="post">
            {% csrf_token %}
            <div class="form-group">
                <label for="username" class="col-sm-2 control-label">账号：</label>
                <div class="col-sm-10">
                    <input type="text" required="required" class="form-control" id="username" name="username"
                           placeholder="请输入您的昵称">
                </div>
            </div>
            <div class="form-group">
                <label for="password" class="col-sm-2 control-label">密码：</label>
                <div class="col-sm-10">
                    <input type="password" required="required" class="form-control" id="password" name="password"
                           placeholder="请输入密码">
                </div>
            </div>

            <div class="form-group">
                <div class="col-md-offset-2 col-md-5">
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" name="islong"> 七天免密登录
                        </label>
                    </div>
                </div>
                <div class="col-md-offset-3 col-md-2">
                    <a href="/users/forget_password/" style="display: inline-block;line-height: 27px;">忘记密码？</a>
                </div>
            </div>
<input type="text" name="next" value="{{next_url}}" hidden>
            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" class="btn btn-default" id="sub_btn">登录</button>
                </div>
            </div>
        </form>
    </div>
</div>
<script>
    // 验证密码
    $(function () {
        $("#password").on("blur", function () {
            console.log("abc")
            password = $("#password").val()
            console.log(password.length)
            if (password.length < 6) {
                // $("#pwb").addClass("has-error")
                // $("#sub_btn").attr("disabled", true)
                $("#msg").html("<span style='color:red;'>" + "密码长度不足6位" + "</span>")
            } else {
                // $("#pwb").addClass("has-success")
                // $("#sub_btn").removeAttr("hidden")
                {#$("#sub_btn").css("display", "block");#}
                $("#msg").html("<span style='color:green;'>" + "" + "</span>")
                {#$("#msg").html("<span style='color:green;'>" + "密码合法！！请继续输入" + "</span>")#}
            }
        })
    })
</script>
{% endblock %}